# TMUX_USAGE.md
この tmux.conf での tmux 使用方法メモ

対象設定: ~/.tmux.conf（提示された内容）

---

## 1. まず覚えるキー（最重要）

### プレフィックスキー
- **Prefix = `Ctrl + a`**
  - tmux の多くの操作は「Prefix → 何かキー」で実行する
  - 例：ウィンドウ作成なら `Ctrl+a` を押してから `c`

### 設定リロード
- **`Ctrl + a` → `r`**
  - `~/.tmux.conf` を再読み込み
  - 反映したいときに使う

---

## 2. ウィンドウ操作（タブのようなもの）

### ウィンドウ切り替え（Prefix不要）
- **`Shift + →`** : 次のウィンドウへ（`next-window`）
- **`Shift + ←`** : 前のウィンドウへ（`previous-window`）
- 端末によっては Shift+矢印がそのまま送られないことがあるため、複数の入力パターンを受けるように設定済み

### ウィンドウ番号のルール
- ウィンドウ番号は **1始まり**（`base-index 1`）
- 閉じたときに番号が詰まる（`renumber-windows on`）
  - 例：1,2,4 があったら 4 が 3 になる

### よく使う標準tmux操作（この設定でも有効）
※この設定ファイルで上書きしていない標準キーは tmux のデフォルトのまま。
- **新規ウィンドウ作成**: `Ctrl + a` → `c`
- **ウィンドウ一覧**: `Ctrl + a` → `w`
- **ウィンドウ名変更**: `Ctrl + a` → `,`
- **ウィンドウ番号指定移動**: `Ctrl + a` → `数字`

---

## 3. ペイン操作（画面分割）

### 分割（この設定で変更済み）
- **横分割**: `Ctrl + a` → `|`
  - 画面を左右に割る（左/右）
- **縦分割**: `Ctrl + a` → `-`
  - 画面を上下に割る（上/下）

> もともとの `"` と `%` による分割は無効化されています。

### ペイン移動（Prefix不要）
- **`Alt + h`** : 左のペイン
- **`Alt + j`** : 下のペイン
- **`Alt + k`** : 上のペイン
- **`Alt + l`** : 右のペイン

（vimの移動キーに寄せてあります）

### ペインのリサイズ（Prefix不要）
- **`Alt + ←`** : 左に 5 縮める/広げる（tmux的には `-L 5`）
- **`Alt + →`** : 右に 5
- **`Alt + ↑`** : 上に 2
- **`Alt + ↓`** : 下に 2

---

## 4. コピー（コピーモード：vim風）

この設定は **copy-mode を vim キーバインド**にしています（`mode-keys vi`）。

### 典型的な流れ（端末内のログをコピーする）
1. コピーモードに入る  
   - tmux標準のままなので、通常は **`Ctrl + a` → `[`**  
     （この設定ファイルでは変更していません）
2. 移動（vi風）  
   - `h j k l` / `Ctrl+u` `Ctrl+d` などでスクロール
3. 範囲選択開始  
   - **`v`**
4. 選択範囲をコピーして終了  
   - **`y`**

### クリップボード連携（xclip がある場合のみ）
- `xclip` がインストールされている環境では、`y` が **システムクリップボードへコピー**になります
- ヘッドレス環境など `xclip` が無い場合は、tmux内コピー（バッファ）になります

---

## 5. マウス操作（有効）

- マウスが **有効** です（`set -g mouse on`）
  - スクロール（コピーモード相当の動き）
  - ペイン選択
  - リサイズ（端末/環境次第）

※マウスが邪魔な環境なら `set -g mouse off` に変更候補。

---

## 6. 表示・品質まわり（知っておくと得）

### 反応速度
- `escape-time 10` により、キー入力の待ちが短くなっており体感が軽い

### カラー
- `screen-256color` を標準端末として設定
- `xterm-256color:Tc` で truecolor 対応（対応端末で発色が良くなる）

### 履歴
- スクロールできる履歴が大きい（`history-limit 50000`）
  - ログ追跡が楽

### ステータスバー
- 左: セッション名（`#S`）
- 右: `ユーザ@ホスト | 日付 時刻`
- 更新間隔は 5 秒

### 自動リネーム等
- ウィンドウ名がコマンドに応じて自動で変わる（`automatic-rename on`）
- ターミナルタイトルも設定する（`set-titles on`）
- `focus-events on` でフォーカスイベントを扱う（端末によって挙動改善）

---

## 7. 最低限のおすすめ運用パターン

- **セッションを用途で分ける**（例：`work`, `infra`, `build`）
- 画面分割は `|` と `-` を基本にして、移動は `Alt+h/j/k/l` で完結させる
- ログコピーは `Ctrl+a [` → `v` → `y` の3手順を身体に入れる
- 設定変更したら `Ctrl+a r` で即反映

---

## 8. 覚えておくべき「この設定の流儀」まとめ

- Prefix は **Ctrl+a**
- 分割は **| と -**
- ペイン移動は **Alt+hjkl（Prefix不要）**
- ペインサイズ変更は **Alt+矢印（Prefix不要）**
- ウィンドウ切り替えは **Shift+←/→（Prefix不要）**
- コピーは **vim風（vで選択、yでコピー）**
- `xclip` があれば **システムクリップボードへコピー**まで行く

---
